{"ast":null,"code":"import _classCallCheck from\"/Users/sxep/Documents/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sxep/Documents/dev/mesto-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";var Api=/*#__PURE__*/function(){function Api(_ref){var address=_ref.address,token=_ref.token;_classCallCheck(this,Api);this._address=address;this._token=token;}_createClass(Api,[{key:\"getUserData\",value:function getUserData(){var _this=this;return fetch(\"\".concat(this._address,\"/users/me\"),{headers:{authorization:this._token}}).then(function(res){return _this._returnServerResponse(res);});}},{key:\"_returnServerResponse\",value:function _returnServerResponse(res){if(res.ok){return res.json();}return Promise.reject(\"\\u0427\\u0442\\u043E-\\u0442\\u043E \\u043F\\u043E\\u0448\\u043B\\u043E \\u043D\\u0435 \\u0442\\u0430\\u043A: \".concat(res.status));}},{key:\"uploadUserAvatar\",value:function uploadUserAvatar(link){var _this2=this;return fetch(\"\".concat(this._address,\"/users/me/avatar\"),{method:'PATCH',headers:{authorization:this._token,'Content-Type':'application/json'},body:JSON.stringify({avatar:link})}).then(function(res){return _this2._returnServerResponse(res);});}},{key:\"getInitialCards\",value:function getInitialCards(){var _this3=this;return fetch(\"\".concat(this._address,\"/cards\"),{headers:{authorization:this._token}}).then(function(res){return _this3._returnServerResponse(res);});}},{key:\"deleteCard\",value:function deleteCard(id){var _this4=this;return fetch(\"\".concat(this._address,\"/cards/\").concat(id),{method:'DELETE',headers:{authorization:this._token}}).then(function(res){return _this4._returnServerResponse(res);});}},{key:\"getCardLike\",value:function getCardLike(id){var _this5=this;return fetch(\"\".concat(this._address,\"/cards\"),{headers:{authorization:this._token}}).then(function(res){return _this5._returnServerResponse(res);});}},{key:\"remoteCardLike\",value:function remoteCardLike(id){var _this6=this;return fetch(\"\".concat(this._address,\"/cards/likes/\").concat(id),{method:'DELETE',headers:{authorization:this._token}}).then(function(res){return _this6._returnServerResponse(res);});}},{key:\"setCardLikes\",value:function setCardLikes(id){return fetch(\"\".concat(this._address,\"/cards/likes/\").concat(id),{method:'PUT',headers:{authorization:this._token}}).then(function(result){return result.ok?result.json():Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \".concat(result.status));});}},{key:\"editProfile\",value:function editProfile(data){var _this7=this;return fetch(\"\".concat(this._address,\"/users/me\"),{method:'PATCH',headers:{authorization:this._token,'Content-Type':'application/json'},body:JSON.stringify({name:data['profile-name'],about:data['profile-profession']})}).then(function(res){return _this7._returnServerResponse(res);});}},{key:\"createCard\",value:function createCard(data){var _this8=this;return fetch(\"\".concat(this._address,\"/cards\"),{method:'POST',headers:{authorization:this._token,'Content-Type':'application/json'},body:JSON.stringify({name:data.name,link:data.link})}).then(function(res){return _this8._returnServerResponse(res);});}}]);return Api;}();export default Api;","map":{"version":3,"sources":["/Users/sxep/Documents/dev/mesto-react/src/components/Api.js"],"names":["Api","address","token","_address","_token","fetch","headers","authorization","then","res","_returnServerResponse","ok","json","Promise","reject","status","link","method","body","JSON","stringify","avatar","id","result","data","name","about"],"mappings":"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","sourcesContent":["class Api {\n  constructor({address, token}) {\n  this._address = address; \n  this._token = token; \n  }\n\n  getUserData() {\n      return fetch(`${this._address}/users/me`, {\n        headers: {\n          authorization: this._token\n        }\n      })\n      .then((res) => this._returnServerResponse(res))\n  }\n\n  _returnServerResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Что-то пошло не так: ${res.status}`);\n  }\n\n  uploadUserAvatar(link) {\n    return fetch(`${this._address}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n          avatar: link,\n      })\n    })\n    .then((res) => this._returnServerResponse(res))\n}\n\n\n\n  getInitialCards() {\n    return fetch(`${this._address}/cards`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then((res) => this._returnServerResponse(res))\n  }\n\n  deleteCard (id) {\n        return fetch(`${this._address}/cards/${id}`, {\n            method: 'DELETE',\n            headers: {\n                authorization: this._token,\n            }\n        })\n        .then((res) => this._returnServerResponse(res))\n  }\n\n  getCardLike(id){\n    return fetch(`${this._address}/cards`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then((res) => this._returnServerResponse(res))\n  }\n\n  remoteCardLike(id){\n    return fetch(`${this._address}/cards/likes/${id}`, {\n      method: 'DELETE',\n      headers: {\n          authorization: this._token,\n      }\n  })\n      .then((res) => this._returnServerResponse(res))\n  }\n\n  setCardLikes(id) {\n    return fetch(`${this._address}/cards/likes/${id}`, {\n      method: 'PUT',\n      headers: {\n        authorization: this._token,\n    }\n  })\n      .then(result => result.ok ? result.json() : Promise.reject(`Ошибка ${result.status}`))\n  }\n\n  editProfile(data) {\n    return fetch(`${this._address}/users/me`, {\n        method: 'PATCH',\n        headers: {\n            authorization: this._token,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            name: data['profile-name'],\n            about: data['profile-profession']\n        })\n    })\n      .then((res) => this._returnServerResponse(res))\n  }\n\n  createCard(data) {\n    return fetch(`${this._address}/cards`, {\n        method: 'POST',\n        headers: {\n            authorization: this._token,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            name: data.name,\n            link: data.link\n        })\n    })\n    .then((res) => this._returnServerResponse(res))\n  }\n\n}\n\nexport default Api;"]},"metadata":{},"sourceType":"module"}