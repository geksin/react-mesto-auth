(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{13:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(5),c=n.n(r),o=(n(4),n(2)),i=n.p+"static/media/header-logo.1f1e9591.svg",l=n(0);var u=function(){return Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("a",{href:"##",target:"_self",children:Object(l.jsx)("img",{className:"header__logo",src:i,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f Mesto"})})})},p=n.p+"static/media/edit.8667ac4a.svg",d=n.p+"static/media/add.d86bb2ed.svg",j=n(6),h=n(7);var m=function(e){return Object(l.jsx)("div",{className:"card__template",children:Object(l.jsxs)("article",{className:"element",children:[Object(l.jsx)("img",{className:"element__photo",src:e.card.link,title:"\u0424\u043e\u0442\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",alt:"\u0424\u043e\u0442\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",onClick:function(){e.onCardClick(e.card)}}),Object(l.jsx)("button",{type:"button",class:"element__button-delete"}),Object(l.jsxs)("div",{className:"element__down-part",children:[Object(l.jsx)("h2",{className:"element__name",children:e.card.name}),Object(l.jsxs)("div",{className:"element__like",children:[Object(l.jsx)("button",{type:"button",class:"element__button-like"}),Object(l.jsx)("span",{className:"element__button-like-counter",children:e.card.likes.length})]})]})]})})},_=new(function(){function e(t){var n=t.address,a=t.token;Object(j.a)(this,e),this._address=n,this._token=a}return Object(h.a)(e,[{key:"getUserData",value:function(){var e=this;return fetch("".concat(this._address,"/users/me"),{headers:{authorization:this._token}}).then((function(t){return e._returnServerResponse(t)}))}},{key:"_returnServerResponse",value:function(e){return e.ok?e.json():Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.status))}},{key:"uploadUserAvatar",value:function(e){var t=this;return fetch("".concat(this._address,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return t._returnServerResponse(e)}))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._address,"/cards"),{headers:{authorization:this._token}}).then((function(t){return e._returnServerResponse(t)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._address,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token}}).then((function(e){return t._returnServerResponse(e)}))}},{key:"getCardLike",value:function(e){var t=this;return fetch("".concat(this._address,"/cards"),{headers:{authorization:this._token}}).then((function(e){return t._returnServerResponse(e)}))}},{key:"remoteCardLike",value:function(e){var t=this;return fetch("".concat(this._address,"/cards/likes/").concat(e),{method:"DELETE",headers:{authorization:this._token}}).then((function(e){return t._returnServerResponse(e)}))}},{key:"setCardLikes",value:function(e){return fetch("".concat(this._address,"/cards/likes/").concat(e),{method:"PUT",headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}))}},{key:"editProfile",value:function(e){var t=this;return fetch("".concat(this._address,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e["profile-name"],about:e["profile-profession"]})}).then((function(e){return t._returnServerResponse(e)}))}},{key:"createCard",value:function(e){var t=this;return fetch("".concat(this._address,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._returnServerResponse(e)}))}}]),e}())({address:"https://mesto.nomoreparties.co/v1/cohort-19",token:"d0d17317-fe5c-4341-9c10-713100a37209"});var b=function(e){var t=s.a.useState("\u0416\u0430\u043a \u0438\u0432 \u043a\u0443\u0441\u0442\u043e"),n=Object(o.a)(t,2),a=n[0],r=n[1],c=s.a.useState("\u0418\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c"),i=Object(o.a)(c,2),u=i[0],j=i[1],h=s.a.useState(""),b=Object(o.a)(h,2),f=b[0],O=b[1],v=s.a.useState([]),x=Object(o.a)(v,2),N=x[0],k=x[1];function g(t){e.onCardClick(t)}return s.a.useEffect((function(){_.getInitialCards().then((function(e){return k(e)})).catch((function(e){console.log(e)}))}),[]),_.getUserData().then((function(e){r(e.name),j(e.about),O(e.avatar)})).catch((function(e){console.log(e)})),Object(l.jsxs)("main",{className:"content",children:[Object(l.jsxs)("section",{className:"profile",children:[Object(l.jsxs)("div",{className:"profile__info",children:[Object(l.jsx)("div",{className:"profile__avatar-hover",children:Object(l.jsx)("div",{className:"profile__avatar",style:{backgroundImage:"url(".concat(f,")")},onClick:e.onEditAvatar,alt:"\u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u0416\u0430\u043a-\u0418\u0432 \u041a\u0443\u0441\u0442\u043e"})}),Object(l.jsxs)("div",{className:"profile__text",children:[Object(l.jsxs)("div",{className:"profile__title",children:[Object(l.jsx)("h1",{className:"profile__name",children:a}),Object(l.jsx)("button",{type:"button",className:"profile__edit-button",onClick:e.onEditProfile,children:Object(l.jsx)("img",{src:p,alt:"\u043a\u043d\u043e\u043f\u043a\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"})})]}),Object(l.jsx)("p",{className:"profile__subtitle",children:u})]})]}),Object(l.jsx)("button",{type:"button",className:"profile__add-button",onClick:e.onAddPlace,children:Object(l.jsx)("img",{className:"profile__icon-add",src:d,title:"\u043a\u043d\u043e\u043f\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c",alt:"\u043a\u043d\u043e\u043f\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]}),Object(l.jsx)("section",{className:"elements",children:N.map((function(e){return Object(l.jsx)(m,{card:e,onCardClick:g},e._id)}))})]})};var f=function(){return Object(l.jsx)("footer",{className:"footer",children:Object(l.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})},O=n.p+"static/media/close_icon.a004a2d5.svg";var v=function(e){return Object(l.jsx)("button",{type:"button",className:"popup__button-close",onClick:e.isClose,children:Object(l.jsx)("img",{className:"popup__button-close-image",src:O,alt:"\u043a\u043d\u043e\u043f\u043a\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u044c"})})};var x=function(e){return Object(l.jsx)("div",{className:"popup popup_".concat(e.name," ").concat(e.isOpen?"popup_opened":""),children:Object(l.jsxs)("div",{className:"popup__container",children:[Object(l.jsx)(v,{isClose:e.isClose}),Object(l.jsxs)("form",{className:"popup__form popup__".concat(e.formName),name:e.name,children:[Object(l.jsx)("h2",{className:"popup__title",children:e.title}),e.children]})]})})};var N=function(e){return console.log(e),Object(l.jsx)("div",{className:"popup popup_image ".concat(e.onClose?"popup_opened":""),children:Object(l.jsxs)("div",{className:"popup__container-image",children:[Object(l.jsx)(v,{isClose:e.isClose}),Object(l.jsx)("img",{className:"popup__img",src:e.card.link,title:"",alt:""}),Object(l.jsx)("p",{className:"popup__signature",children:e.card.name})]})})};var k=function(){var e=s.a.useState(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],r=s.a.useState(!1),c=Object(o.a)(r,2),i=c[0],p=c[1],d=s.a.useState(!1),j=Object(o.a)(d,2),h=j[0],m=j[1];function _(){m(!1),p(!1),a(!1),L(!1)}var O=s.a.useState({}),v=Object(o.a)(O,2),k=v[0],g=v[1],C=s.a.useState(!1),y=Object(o.a)(C,2),S=y[0],L=y[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(u,{}),Object(l.jsx)(b,{onEditProfile:function(){p(!0)},onAddPlace:function(){m(!0)},onEditAvatar:function(){a(!0)},onCardClick:function(e){g(e),L(!0)}}),Object(l.jsxs)(x,{name:"edit-profile",formName:"form_edit",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:i,isClose:_,children:[Object(l.jsx)("input",{id:"profile-name",name:"profile-name",type:"text",className:"popup__profile-input",placeholder:"\u0418\u043c\u044f",minLength:2,maxLength:40,required:!0}),Object(l.jsx)("span",{id:"profile-name-error",className:"popup__profile-input-error"}),Object(l.jsx)("input",{id:"profile-profession",name:"profile-profession",type:"text",className:"popup__profile-input",placeholder:"\u0412\u0438\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438",minLength:2,maxLength:200,required:!0}),Object(l.jsx)("span",{id:"profile-profession-error",className:"popup__profile-input-error"}),Object(l.jsx)("button",{type:"submit",className:"popup__button-save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(l.jsxs)(x,{name:"add-card",formName:"form_add",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:h,isClose:_,children:[Object(l.jsx)("input",{id:"card-name",name:"card-name",type:"text",className:"popup__profile-input",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:2,maxLength:30,required:!0}),Object(l.jsx)("span",{id:"card-name-error",className:"popup__profile-input-error"}),Object(l.jsx)("input",{id:"card-link",name:"card-link",type:"url",className:"popup__profile-input",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(l.jsx)("span",{id:"card-link-error",className:"popup__profile-input-error"}),Object(l.jsx)("button",{type:"submit",className:"popup__button-save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(l.jsxs)(x,{name:"upload-avatar",formName:"form-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:n,isClose:_,children:[Object(l.jsx)("input",{id:"ava-link",name:"card-link",type:"url",className:"popup__profile-input",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(l.jsx)("span",{id:"ava-link-error",className:"popup__profile-input-error"}),Object(l.jsx)("button",{type:"submit",className:"popup__button-save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(l.jsx)(x,{name:"delete-card",formName:"delete-card",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:!1,isClose:_,children:Object(l.jsx)("button",{type:"button",className:"popup__button-save",children:"\u0423\u0432\u0435\u0440\u0435\u043d \u043d\u0430 \u0432\u0441\u0435 100%"})}),Object(l.jsx)(N,{card:k,onClose:S,isClose:_}),Object(l.jsx)(f,{})]})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,14)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};c.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(k,{})}),document.getElementById("root")),g()},4:function(e,t,n){}},[[13,1,2]]]);
//# sourceMappingURL=main.bff45582.chunk.js.map